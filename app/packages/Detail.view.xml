<mvc:View
    height="100%"
    controllerName="packages.Detail"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:l="sap.ui.layout"
    xmlns:suite="sap.suite.ui.microchart"
    xmlns:macros="sap.fe.macros">
<Page >
    <Table width="100%" binding="{pkg>/}" growing="true" growingThreshold="10" 
        items="{pkg>IntegrationDesigntimeArtifacts}">
        <headerToolbar>
            <Toolbar width="100%">
                <Label text="[PKG] IntegrationDesigntimeArtifacts ({pkg>IntegrationDesigntimeArtifactsCount})"/>
                <ToolbarSpacer/>
                <CheckBox text="{i18n>filterDeployed}" selected="{ui>/filter/IsDeployed}" select="filterDTArtifacts" />
                <CheckBox text="{i18n>filterDrafts}" selected="{ui>/filter/HasDraft}" select="filterDTArtifacts" />
                <SearchField width="20rem" liveChange="searchArtifacts"/>
                <Button icon="sap-icon://chain-link" press="gotoPackage"/>
            </Toolbar>
        </headerToolbar>
        <columns>
            <Column width="25rem">
                <Label text="{i18n>ID}"/>
            </Column>
            <Column>
                <Label text="{i18n>DESCRIPTION}"/>
            </Column>
            <Column>
                <Label text="{i18n>TYPE}"/>
            </Column>
            <Column>
                <Label text="{i18n>STATUS}"/>
            </Column>
            <Column>
                <Label text="{i18n>VERSION}"/>
            </Column>
            <Column>
                <Label text="{i18n>ACTIONS}"/>
            </Column>
        </columns>
        <items>
            <ColumnListItem type="Navigation" press="navtoDTArtifacts" vAlign="Middle">
                <cells>
                    <ObjectIdentifier text="{pkg>Id}" title="{pkg>Name}"/>
                    <Text text="{pkg>Description}"/>
                    <Text text="{pkg>Runtime/Type}"/>
                    <ObjectStatus text="{pkg>Runtime/Status}"/>
                    <!-- <Link text="{pkg>Runtime/Version} / {pkg>Version}"/> -->
                    <ObjectNumber  active="true" inverted="true"
                        number="{
                            parts:[
                                {path: 'pkg>Runtime/Version'},
                                {path: 'pkg>Version'}
                            ],
                            formatter: '.formatVersion'
                        }"
                        state="{
                            parts:[
                                {path: 'pkg>Runtime/Version'},
                                {path: 'pkg>Version'}
                            ],
                            formatter: '.formatVersionStatus'
                        }" />
                    <Button icon="sap-icon://action" />
                </cells>
            </ColumnListItem>
        </items>
    </Table>

    <Table width="100%" binding="{pkg>/}" growing="true" growingThreshold="10" 
		items="{
			path : 'pkg>IntegrationRuntimeArtifacts',
			filters:[{path:'Type', operator: 'NE', value1: 'INTEGRATION_FLOW'}],
			sorter : { path : 'DeployedOn', descending : true }
		}">
        <headerToolbar>
            <Toolbar width="100%">
                <Label text="[ALL] IntegrationRuntimeArtifacts"/>
                <ToolbarSpacer/>
                <SearchField width="20rem" liveChange="searchArtifacts"/>
                <Button icon="sap-icon://chain-link" press="gotoMonitoring"/>
            </Toolbar>
        </headerToolbar>
        <columns>
            <Column width="25rem">
                <Label text="{i18n>ID}"/>
            </Column>
            <Column>
                <Label text="{i18n>DEPLOYED}"/>
            </Column>
            <Column>
                <Label text="{i18n>TYPE}"/>
            </Column>
            <Column>
                <Label text="{i18n>STATUS}"/>
            </Column>
            <Column>
                <Label text="{i18n>VERSION}"/>
            </Column>
            <Column>
                <Label text="{i18n>ACTIONS}"/>
            </Column>
        </columns>
        <items>
            <ColumnListItem vAlign="Middle">
                <cells>
                    <ObjectIdentifier text="{pkg>Id}" title="{pkg>Name}"/>
                    <Text text="{
                            path: 'pkg>DeployedOn',
							type: 'sap.ui.model.odata.type.DateTimeOffset', 
							formatOptions: { style:'short' }
                        } {pkg>DeployedBy}"/>
                    <Text text="{pkg>Type}"/>
                    <ObjectStatus text="{pkg>Status}"/>
                    <!-- <Link text="{pkg>Version}"/> -->
                    <ObjectNumber  active="true" inverted="true" number="{pkg>Version}" />
                    <Button icon="sap-icon://action" />
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</Page>
</mvc:View>